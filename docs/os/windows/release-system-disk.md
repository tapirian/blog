# Windows释放C盘空间

## 前言
我们的电脑使用的时间久了，就会发现C盘空间越来越大。众所周知，C盘是系统盘，里面有不少系统文件我们不能随意删除，那么如何安全地清除垃圾文件呢？我们这里给出以下几种方法。

## 释放C盘空间方法
我们可以使用`TreeSize`等软件，快速查看C盘哪些文件或文件夹占用的空间较大，然后做定向处理。常规的处理C盘文件的方法有：

### 1、安装文件另保存
一般安装的软件默认C盘，我们可以再安装软件的时候，选择将其安装到别的盘。

### 2、移动C盘个人文件
- 移动C盘个人文件
- 整理桌面

### 3、修改软件的即时文件存储位置
我们可以通过更改相关软件的大文件存储位置，常见的有：
- 微信聊天数据
- 浏览器下载文件
- DDD软件项目目录

### 4、清理缓存或临时文件
清除临时文件需要知道，这会导致有些软件或服务第一次启动的时间会变慢。另外，删除了系统更新的文件之后，系统无法恢复到更新之前的状态。有以下几种方式可以清除临时文件:
#### （1）存储感知
这是`windows10、windows11`标准的清楚缓存方式。

进入`设置 -> 系统 -> 存储`，打开`存储感知`开关，根据清理建议，选择文件进行清理，比如：临时文件等。也可以配置清理计划，定时清理文件。

另外也可以在`存储`界面设置新文件、新应用保存位置。

#### （2）磁盘清理cleanmgr
`win+R`打开命令运行窗口，输入命令：`cleanmgr`，或者直接搜索`磁盘清理`，选择要清理的C盘驱动器，选择下列几项进行清理：
- 临时文件
- 缓存的缩略图
- Windows 更新清理
- 临时 Internet 文件

#### （3）手动清理临时文件
| 缓存类型         | 路径                                                        |
| ------------ | --------------------------------------------------------- |
| 用户临时文件       | `%TEMP%` 或 `C:\Users\<用户名>\AppData\Local\Temp`            |
| 系统临时文件       | `C:\Windows\Temp`                                         |
| Windows 更新缓存 | `C:\Windows\SoftwareDistribution\Download`                |
| 图标缩略图缓存      | `C:\Users\<用户名>\AppData\Local\Microsoft\Windows\Explorer` |

> 注：清理windows更新缓存的时候，可以先停止windows更新服务，删除完成之后再启用。启停命令：
> 
> 启动：net start wuauserv && net start bits
> 
> 停止：net stop wuauserv && net stop bits
>
> 如果删除了之后过段时间，缓存又更新了，可以直接关闭Windows更新服务


#### （4）bat脚本，定时执行
可以将手动删除的命令，编写成bat脚本
```bat
@echo off
echo 正在清理临时文件...
del /s /f /q %TEMP%\*
del /s /f /q C:\Windows\Temp\*
del /s /f /q C:\Windows\SoftwareDistribution\Download\*
echo 清理完成！
pause
```

该命令会强制递归删除文件夹下所有只读文件。正在被占用的文件会跳过，不会删除。参数含义：
| 参数   | 含义                        | 作用说明                       |
| ---- | ------------------------- | -------------------------- |
| `/s` | 删除指定目录及其 **所有子目录** 中的匹配文件 | 即递归删除整个目录树下的所有文件           |
| `/f` | **强制删除只读文件**              | 即使文件有“只读”属性也照删不误           |
| `/q` | **静默模式（Quiet）**           | 不提示确认信息（不会问 “确认删除吗？(Y/N)”） |

启动windos计划任务，定时执行。

### 5、卸载无用的软件
可以将无用的软件卸载，同时清理残留的文件。

  
